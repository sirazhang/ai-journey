# City Workbench - 信息验证工作台规格文档

## 概述
Glitch 的工作台是一个 macOS 风格的信息验证系统，用户需要判断各类陈述的真伪，并使用辅助工具来核实信息。

## 核心功能

### 1. 工作台应用 (Workbench App)
**主要功能：** 展示需要验证的陈述，用户判断真假

**验证类别：**
1. **常识事实核查** (Common Sense)
   - 示例："长城可以从月球上用肉眼看到"
   - 验证方式：搜索引擎查询

2. **新闻/声明可信度核查** (News Credibility)
   - 示例："某公司宣布推出新产品"
   - 验证方式：搜索引擎查询新闻来源

3. **地点存在性验证** (Place Existence)
   - 示例："亚特兰蒂斯岛位于大西洋"
   - 验证方式：地图应用搜索

4. **位置准确性验证** (Location Accuracy)
   - 示例："加州在美国"
   - 验证方式：地图应用查看

5. **距离/可达性验证** (Distance/Reachability)
   - 示例："从北京到上海步行需要1小时"
   - 验证方式：地图应用查询路线

**界面设计：**
```
┌─────────────────────────────────────┐
│ 当前任务: 常识事实核查              │
│ 得分: 50 分                         │
├─────────────────────────────────────┤
│                                     │
│  验证此陈述：                       │
│  "长城可以从月球上用肉眼看到"       │
│                                     │
│  提示: 搜索 "can you see great      │
│        wall from moon"              │
│                                     │
│  [TRUE]  [FALSE]                    │
│                                     │
└─────────────────────────────────────┘
```

**反馈界面：**
```
┌─────────────────────────────────────┐
│ ✓ 正确！ / ✗ 错误！                 │
├─────────────────────────────────────┤
│ 分析：                              │
│ 这是一个常见的误解。宇航员已经     │
│ 确认无法用肉眼看到长城。           │
│                                     │
│ [下一题]                            │
└─────────────────────────────────────┘
```

### 2. 搜索应用 (Safari/Browser)
**功能：** 模拟网页搜索引擎

**界面设计：**
```
┌─────────────────────────────────────┐
│ 🔍 [搜索框]                    [Go] │
├─────────────────────────────────────┤
│ 搜索结果：                          │
│                                     │
│ 1. Wikipedia - Great Wall of China │
│    The Great Wall cannot be seen... │
│                                     │
│ 2. NASA - Myths About Space         │
│    Astronauts confirm...            │
│                                     │
└─────────────────────────────────────┘
```

**实现方式：**
- 使用 Gemini 2.5 Flash 的 Google Search 工具
- 返回搜索结果摘要

### 3. 地图应用 (Maps)
**功能：** 查询地点、验证位置、计算距离

**界面设计：**
```
┌─────────────────────────────────────┐
│ 📍 [搜索地点]                 [搜索]│
├─────────────────────────────────────┤
│ 地图显示区域                        │
│ [简化的地图可视化]                  │
│                                     │
│ 地点信息：                          │
│ 名称: 加利福尼亚州                  │
│ 位置: 美国西海岸                    │
│ 坐标: 36.7783°N, 119.4179°W        │
│                                     │
│ [获取路线]                          │
└─────────────────────────────────────┘
```

**路线查询：**
```
┌─────────────────────────────────────┐
│ 从: [起点]                          │
│ 到: [终点]                    [查询]│
├─────────────────────────────────────┤
│ 距离: 1,200 公里                    │
│ 驾车时间: 约 12 小时                │
│ 步行时间: 约 250 小时 (不可行)     │
└─────────────────────────────────────┘
```

**实现方式：**
- 使用 Gemini 2.5 Flash 的 Google Maps 工具
- 返回地点信息和路线数据

### 4. 日历应用 (Calendar)
**功能：** 显示当前日期，帮助验证时间相关的陈述

**界面设计：**
```
┌─────────────────────────────────────┐
│      2026年2月                      │
├─────────────────────────────────────┤
│ 日 一 二 三 四 五 六                │
│                    1                │
│ 2  3  4  5  6  7  8                │
│ 9  10 11 12 13 14 15               │
│ 16 17 18 19 20 21 22               │
│ 23 24 25 26 27 28                  │
│                                     │
│ 今天: 2026年2月6日 星期五           │
└─────────────────────────────────────┘
```

## 技术实现

### API 集成
1. **Gemini 2.5 Flash** - 生成验证陈述
2. **Google Search (via Gemini)** - 搜索功能
3. **Google Maps (via Gemini)** - 地图功能

### 组件结构
```
MacBookInterface.jsx (主容器)
├── MenuBar.jsx (顶部菜单栏)
├── Desktop.jsx (桌面)
│   ├── DesktopIcon.jsx (桌面图标)
│   └── Dock.jsx (底部 Dock)
└── WindowManager.jsx (窗口管理)
    ├── WorkbenchWindow.jsx (工作台窗口)
    ├── BrowserWindow.jsx (浏览器窗口)
    ├── MapsWindow.jsx (地图窗口)
    └── CalendarWindow.jsx (日历窗口)
```

### 数据流
```
1. 用户打开工作台应用
2. 系统生成随机验证任务
3. 用户可以打开辅助应用（搜索/地图/日历）
4. 用户做出判断（TRUE/FALSE）
5. 系统显示反馈和解释
6. 更新得分，加载下一题
```

## 用户体验流程

### 场景 1: 常识验证
1. 工作台显示："珠穆朗玛峰是世界最高峰"
2. 用户打开搜索应用
3. 搜索 "highest mountain in the world"
4. 确认信息后，点击 TRUE
5. 系统显示正确，+10 分

### 场景 2: 地点验证
1. 工作台显示："亚特兰蒂斯位于地中海"
2. 用户打开地图应用
3. 搜索 "Atlantis"
4. 地图显示无结果或虚构地点
5. 用户点击 FALSE
6. 系统显示正确，+10 分

### 场景 3: 距离验证
1. 工作台显示："从纽约到洛杉矶步行需要2天"
2. 用户打开地图应用
3. 查询路线：纽约 → 洛杉矶
4. 地图显示：步行约 900 小时
5. 用户点击 FALSE
6. 系统显示正确，+10 分

## 评分系统
- 每题正确：+10 分
- 每题错误：0 分
- 目标：累积分数，挑战更高难度

## 难度等级
1. **简单** - 明显的真假陈述
2. **中等** - 需要查询验证
3. **困难** - 需要多个工具配合验证

## 未来扩展
1. 多人竞赛模式
2. 排行榜系统
3. 更多验证类别
4. 时间限制挑战
5. 成就系统

## 实现优先级

### Phase 1 (MVP)
- [x] MacBook 界面框架
- [ ] 工作台应用（基础版）
- [ ] 简单的陈述生成
- [ ] TRUE/FALSE 判断
- [ ] 反馈系统

### Phase 2
- [ ] 搜索应用集成
- [ ] 地图应用集成
- [ ] 日历应用
- [ ] 多窗口管理

### Phase 3
- [ ] 完整的 Gemini API 集成
- [ ] 高级验证类别
- [ ] 评分和进度系统
- [ ] 数据持久化

## 技术挑战
1. **API 配额管理** - Gemini API 有速率限制
2. **地图可视化** - 简化的地图展示
3. **窗口管理** - 多窗口的 z-index 和焦点管理
4. **响应式设计** - 适配不同屏幕尺寸

## 建议
由于这是一个复杂的功能，建议：
1. 先实现 MVP 版本（工作台应用 + 基础判断）
2. 逐步添加辅助应用
3. 最后完善 API 集成和高级功能
